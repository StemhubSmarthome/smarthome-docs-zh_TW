# 第十二課	初始 APP 製作



## 任務背景：

智能家居 App 是智能家居實現可移動化管理和控制的媒介。可以說，沒有 APP 的智能家居不是真正的智能家居，APP 的應用為智能家居提供了一種全新的控制方式，是智能家居不可分割的一部分。智能家居 App 的出現大大改變了一些家庭的生活習慣。它不但給用戶一個舒適的體驗過程，而且是居家生活的好幫手。本節課的任務就要了解智能家居 APP 以及其製作過程和原理。


## 一、了解智能家居 APP 基礎功能：

智能家居 APP 是為管理和控制智能家居，因此在設計智能家居 APP 時，要有以下基本基本功能：
信息反饋：將家中智能設備運行狀態的各項數據實時反饋到手機 APP上，當出現異常情況時，可遠程向手機 APP 發送報警信息。
設備控制：主要包括定時、遠程、聯動、場景等，例如定時開關空調，遠程關閉電視和照明燈等。
安全防護：智能家電 APP 開發為了讓廣大用戶的家居生活變得更安全，它推出了一套安全防護系統；隨時隨地查看家居安全問題。

## 二、了解 App Inventor 2

開發 APP 要用到 App Inventor 2 軟件工具，App Inventor 2 簡稱 ai，為了和人工智能（Artificial Intelligence）區別，簡稱用小寫。ai 目前只能製作安卓應用，由於 ios 規範的限制，ai 在未來比較長的一段時間裡也只能製作安卓應用。
ai 是一個可視化的安卓應用製作平台，用戶使用瀏覽器打開 ai 平台網站（App Inventor 2 WxBit 漢化版，簡稱 WxBit 版，提供高德地圖、高德定位、百度語音合成與識別、相機預覽框等組件，支持多點觸控、動態創建組件和通用事件，還有更多細節優化，漢化並增強的 App Inventor 2 服務器。），跟 scratch 編程一樣，通過拖拽組件和邏輯塊，即可編程完成安卓應用的製作。
ai 平台提供的即時調試工具——AI 伴侶，在手機安裝，或者在安卓模擬器安裝後，能夠通過 ai 連接碼即時連接調試正在製作的安卓應用開始製作應用前，先安裝好本站專用的 AI2 伴侶（手機版、電腦版），如果手機安裝了其他版本的 AI2 伴侶，需要先卸載，否則由於名字衝突安裝不上。

## 三、了解 App Inventor 2 的使用

App inventor 2 在使用時必須要使用谷歌瀏覽器、QQ 瀏覽器、Firefox、 Safari 等非 IE 瀏覽器打開 ai 網站：WxBit 漢化版。注意：有的瀏覽器需要註冊賬號，用郵箱註冊就可以了，這裡不做贅述，當你完成註冊後，瀏覽器會提示需要賬號驗證，需要在另一個設備上登錄賬號，這時你只需要在手機上也下載一個同樣的瀏覽器，就可以完成。

本文檔以 Firefox 瀏覽器演示，具體操作步驟如下：
1、進入 App inventor 2 在線網站：https://app.wxbit.com/
2、使用 QQ 賬號登陸，如圖 12-1 所示

























圖 12-1

3、如果你的電腦上已經登陸了 QQ，會自動檢測到你的 QQ 號碼，直接點擊即可，如圖 12-2 所示














圖12-2
4、登錄之後，進入 APP inventor2 界面，如圖 12-3 所示

圖 12-3

5、點擊 APP inventor2 界面左上角的標簽“幫助”，然後點擊“下載 AI 伴侶”，會出現下載 AI 伴侶的窗口，選擇需要下載的版本，如圖 12-4 和 12-5 所示：

圖 12-4










圖 12-5


在選擇下載 AI 伴侶版本的時候：：
1) 如果選擇在手機上安裝 AI 伴侶，可以掃描二維碼下載，不過掃二維碼下載比較慢，也可以通過電腦下載 AI 伴侶.apk，然後在電腦上找到下載的 AI 伴侶.apk，如圖 12-6 所示，將下載好的安裝包通過 QQ 或者拷貝到安卓系統的手機，進行安裝就可以了。

2）如果選擇在電腦上安裝 AI 伴侶，根據自己的電腦系統，選擇相應的版本，
如果電腦是 Windows 32 位系統則點擊如圖 12-7 中所示的桌面版下載：Windows 版（32 位）
如果電腦是 Windows 64 位系統則點擊如圖 12-7 中所示的桌面版下載：Windows 版（64 位）
如果電腦是蘋果系統則點擊如圖 12-8 中所示的桌面版下載：Mac 版

3）下載 AI 伴侶安裝包之後，在電腦上找到下載的安裝包，如圖 12-7 所示







4）然後雙擊，點擊“下一步”開始安裝，如圖 12-8 所示,等待一會，安裝完成，如圖 12-9 所示。













圖 12-8











  圖12-9

5）到此，App inventor 2 的工具已經全部安裝好，如果安裝的是電腦版（集成版），你電腦桌面上會出現三個圖標，如圖 12-10 所示






a) “AI2 漢化版”使用自帶的 Chrome 瀏覽器打開
https://app.wxbit.com，不使用這個快捷，用自己喜歡的其他瀏覽器打開上面網址，效果是一樣的。這個快捷方式只是方便沒有合適瀏覽器，和懶得記憶網址的用戶。

b) “AI2 集成版” 這個快捷方式，會同時啟動 AI2 伴侶和 AI2 漢化版。

c) “AI2 伴侶”就是使用瀏覽器模擬運行的 AI 伴侶，某些電腦由於顯卡不支持或不兼容，不能啟動。如果長時間停留在圖標界面，請嘗試“以管理員權限運行”。有的電腦首次運行 AI 伴侶需選擇一個文件夾作為 AI 伴侶的外部存儲（SDCard），該文件夾中的“Appinventor”目錄用於保存調試應用的素材文件。務必選擇，不選擇則無法啟動。有 的電腦第一次運行會出現更新 AI2 伴侶的提示，運行之後等待更新完成之後即可。



       
         圖 12-11 電腦版 AI 伴侶界面	圖 12-12 手機版 AI 伴侶界面


## 四、了解 App Inventor 的開發環境

App Inventor 的編程環境包括以下三個重要組成部分，如圖 12-13 所示：

設計視圖：如圖 12-13A 所示，組件設計器運行在瀏覽器中，創建應用過程中，用它來進行組件的選擇，並進行屬性設置；
邏輯設計視圖：如圖 12-13B 所示，像組件設計器一樣，塊編輯器也在瀏覽器中運行，用於創建組件的行為；
測試設備：在開發應用過程中，可以用 Android 設備對應用進行同步的運行與測試；如果你手邊沒有 Android 設備，你可以使用系統中集成的 Android 模擬器來測試應用。



如圖12-13A	設計視圖：用於設置應用的外觀













如圖 12-13B	編程視圖：用於設定應用的行為

如果你是第一次訪問網站 ai2.appinventor.mit.edu，你會看到項目頁，它多半是空的，因為你還沒有創建過任何項目。單擊頁面左上角的菜單“項目→新建項目”創建一個項目，輸入“智能家居”作為項目名稱（注意不帶空格），然後單擊“確定”按鈕。
新建項目後打開的第一個窗口是設計視圖，此時，你可以單擊窗口右上角的邏輯設計按鈕來切換到邏輯設計視圖。
App Inventor 是一個基於雲計算的開發工具，也就是說，當你在開發項目時，項目中的所有信息都保存在網絡服務器上，因此，當你關閉 App Inventor，然後再重新打開它時，項目依然還在，你不需要像使用微軟公司的Word 那樣，在本地電腦上保存任何信息。

## 五、製作“歡迎光臨智能家居”APP

1、雙擊運行 AI2 漢化版，如圖 12-14 所示，並使用 QQ 登錄：


圖 12-14

2、登錄之後，界面如圖 12-15 所示；

圖 12-15

3、新建項目，點擊“新建項目”開始製作安卓應用，如圖 12-16 所示，在 彈出的窗口填寫項目名為“智能家居”, 如圖 12-17 所示。


圖 12-16


    
圖 12-17

4、點擊“確認”，自動進入組件設計頁面，如圖 12-18 所示：

圖 12-18

標識 1：組件面板：選中所需的組件後，使用鼠標拖拽到中間的手機界 面區域，就能在項目中使用該組件了。點擊組件右邊的問號，查看組件的介紹。熟悉 ai 內置組件後，會發現組件不夠用，那麽就可以通過上傳“擴展”加入其它用途的組件，擴展 ai 的功能，製作更加豐富的應用。
標識 2：ai 中有“組件設計”和“邏輯設計”兩項重要功能。
在“組件設計”視圖中，選擇合適的組件設計應用的界面；
在“邏輯設計”視圖中，設計組件對應的事件邏輯。比如點擊按鈕更新標簽的顯示文本等。
標識 3：“組件屬性”區域，不同組件會有不同的屬性，“Screen1” 組件的屬性中，可以設置應用安裝到手機中的顯示名稱、應用圖標等。 屬性具體的用途，通過屬性名稱也能理解。少數不能理解的屬性，設置 後連上 AI 伴侶即可看到。

5、點擊“Screen1”，在組件屬性中的標題欄修改標題名稱為“智能家居”並回車確認，你會看到在預覽窗口上方的文字也改變了，如圖 12-19 所示。
圖12-19

6、在用戶界面上拖動“按鈕”至控制工作面板，然後點擊組件列表的 Screen1, 在組件屬性中的水平對齊和垂直對齊中選擇相應的對齊方式， 即可看到“按鈕”在 APP 界面的位置，如圖 12-20 所示：
圖 12-20

7、點擊組件列表的按鈕，在組件屬性中，修改文本文字為“歡迎光臨智能 家居”，設置字號大小，然後在背景欄中選擇需要導入的照片，在寬度 和高度欄中調整照片合適的尺寸，如圖 12-21 所示：


              圖 12-21


8、在設計視圖左側的組件面板中，單擊多媒體類組件，打開多媒體組件列表。向預覽窗口中拖放一個音效播放器組件。無論你把它放在預覽窗口中的什麽位置，它都將出現在工作區域底部的“非可視組件”區。非可視組件在應用中用於實現特定的功能，但它們不會顯示在用戶界面中， 然後點擊音效播放器 1，在組件屬性源文件欄上傳下載好的“welcome.mp3”音效文件，如圖 12-22 所示：
圖 12-22

9、點擊右上角的邏輯設計切換到編程界面，然後在模塊中的按鈕和音效播放器中選擇其控制程序模塊，拖到工作面板中進行組合，接著點擊保存 項目，如圖 12-23 所示：
圖 12-23

10、點擊左上角的生成 APK，會出現“顯示二維碼”和“下載到本地”選 項，如圖 12-24 所示。點擊顯示二維碼，會生成 APK 文件二維碼，如圖12-25 所示，然後使用手機 AI 伴侶掃描圖二維碼，即可下並按照智能家居 APP；選擇下載到本機則將生成的 APK 文件下載到電腦，如圖 12-26 所示，即完成 APP 製作
圖 12-24


    圖 12-25	圖 12-26

11、手機打開智能家居 APP 應用，即可看到如圖 12-27 所示的界面，點擊圖案，即可聽到“welcome”語音。


圖 12-27

## 五、總結
本節課了解App Inventor 的開發環境及其使用，並通過 APP inventor2 製作一個簡單的歡迎光臨智能家居的 APP，從而掌握 APP 的基本製作方法
