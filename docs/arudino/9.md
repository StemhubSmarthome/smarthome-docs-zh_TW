# 第九課	智能煙霧報警器



## 任務背景：

生命是脆弱且無價的，也只有活著我們才能對生活有下一步的追求。隨著社會報導的家居生活安全事故越來越多，人們也更加注重生活環境的安全性， 一些警報器也被運用得更加廣泛，尤其是針對火災的防禦警報系統。那本節課我們就來完成製作一個智能煙霧報警器。

## 器材準備：

Arduino主板、擴展板、電池盒、無源蜂鳴器、煙霧傳感器、摩打風扇、 火焰傳感器、連接線、USB 數據線。


## 一、了解智能煙霧報警器

煙霧報警器也稱火災報警器，其作用是能檢測家居中是否有火災發生，及時報警提醒人們，避免因為火災而造成重大財產損失和人身安全。
煙霧報警器其實主要依靠的是傳感器，通過傳感器感知煙霧，當煙霧達到 一定濃度的時候，它就會判斷出有火災了，並且煙霧報警器的控制器可以聯網還能進行通訊，當煙霧達到一定的濃度時，它會干擾我們煙霧報警器電離子的正常運行，電壓、電流都會發生改變，因此破壞了煙霧報警器的電子平衡，這個時候主機就會接收到信息，然後通過無線發射器將報警信號發射出去。
而本課程製作的智能煙霧報警器是利用煙霧傳感器、火焰傳感器、風扇摩打和無源蜂鳴器組成的。

## 二、了解氣體傳感器和火焰傳感器

### 2.1		氣體傳感器
氣體傳感器所使用的氣敏材料是在清潔空氣中電導率較低的二氧化錫(SnO2)。當傳感器所處環境中存在可燃氣體時，傳感器的電導率隨空氣中可燃氣體濃度的增加而增大。使用簡單的電路即可將電導率的變化轉換為與該氣體濃度相對應的輸出信號。當氣體傳感器檢測到相應的氣體時，會輸出一個低電平的數字信號， 同時還有對應的模擬信號。
該氣體傳感器有 G、V、A、D 四個引腳，A 引腳可以連接主板 A0-A5 模擬管腳，D 引腳可以連接主板 D0-D13 好管腳。


### 2.2		火焰傳感器
火焰傳感器是利用紅外線對火焰敏感的特性來檢測火焰的傳感器裝置。當發生火災時，會有特別強烈的紅外線輻射，火焰傳感器利用紅外線對火焰非常敏感的特點，使用特制的紅外線接收管來檢測火焰。其在特定波段的紅外光線的照射下會做反應，然後把火焰的亮度轉化為高低變化的電平信號。在使用時，傳感器與火焰要保持一定距離以免高溫損壞傳感器，其對打火機測試火焰距離範圍為 80cm，火焰越大，檢測距離越遠。
火焰傳感器有 G、V、A、D 四個管腳，其可以與主板的數字接口或者模擬接口連接使用。如果接的是模擬口，火焰傳感器的模擬值會根據火焰大小和離火焰的距離的近遠而變小；如果是連接數字接口，火焰傳感器的數字值是當讀取的模擬值小於閥值時輸出低電平（0），如果大於閥值則輸出高電平（1）。閥值大小可以通過調節可調電阻的大小來調節。

## 三、煙霧報警器安裝
用 M3*8 螺絲把煙霧傳感器和火焰傳感器安裝在右側窗戶旁邊，如圖 9-1 所示。











圖 9-1

## 四、程序設計
### 4.1		算法設計：

當發生火災時，就會有火焰和煙霧產生，本課程製作的煙霧報警器就是利用氣體傳感器感受周圍產生的煙霧濃度或火焰傳感器感受火焰的強度，然後利用無源蜂鳴器發生警報和開啟風扇把煙霧吹散。其程序流程圖如下: 


### 4.2	硬件連接
氣體傳感器連接在擴展板的 A0、D7（P5）管腳，並使用 A0 管腳讀取數據；火焰傳感器連接在擴展板的 A1、D8（P6）管腳，並使用 D8 管腳讀取數據；無源蜂鳴器連接在擴展板的 D3（P9）號管腳；直流電機風扇模塊連接在擴展板的 D5、D6（P8）管腳。
傳感器和執行器
主控板
氣體傳感器
A0、D7（P5），使用 A0 管腳讀取數據
火焰傳感器
A1、D8（P6），使用 D8 管腳讀取數據
無源蜂鳴器
D3
直流電機風扇模塊	
D5、D6（P8）






### 4.3	程序示例：
Arduino IDE

void setup(){ 
  pinMode(8, INPUT);
  pinMode(5, OUTPUT);
  pinMode(6, OUTPUT);
  pinMode(3, OUTPUT);

}

void loop(){
if (analogRead(A0) > 100 || digitalRead(8) == 0) {

digitalWrite(5,HIGH); digitalWrite(6,LOW); digitalWrite(3,HIGH); delay(1000); digitalWrite(3,LOW); delay(1000);


} else { digitalWrite(5,LOW); digitalWrite(6,LOW);
digitalWrite(3,LOW);

}
}



Mixly 程序
















MagicBlock 程序




## 五、總結
本節課我們學習了煙霧傳感器及火焰傳感器的特點及其原理，然後通過製作煙霧報警器，從中掌握煙霧傳感器和火焰傳感器的編程用法，實現當遇到火災發生時，及時報警的功能。
